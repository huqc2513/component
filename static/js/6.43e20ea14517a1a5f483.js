webpackJsonp([6],{OL4i:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("woOf"),s=i.n(n),a=i("mvHQ"),r=i.n(a);function c(t){var e=t.getFullYear(),i=(t.getMonth()+1).toString(),n=t.getDate().toString();return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),e+"-"+i+"-"+n}function o(t,e){var i={getMonthData:function(t,e){var i=[];if(!t||!e&&0!=e){var n=new Date;t=n.getFullYear(),e=n.getMonth()+1}var s=new Date(t,e-1,1),a=s.getDay();t=s.getFullYear(),e=s.getMonth()+1;for(var r=new Date(t,e-1,0).getDate(),o=a,l=new Date(t,e,0).getDate(),m=0;m<35;m++){var u=m+2-o,v=u,d=e,f=c(new Date(t,e-1,v)),g=new Array(7,1,2,3,4,5,6),p=h(f).getDay();p=g[p];var T=h(f).getTime();u<=0?(d=e-1,v=r+u):u>l&&(d=e+1,v-=l),0==d&&(d=12),13==d&&(d=1),i.push({month:d,date:u,showDate:v,time:f,ms:T,week:p})}return{year:t,month:e,days:i}}};return i.getMonthData(t,e)}function h(t){if(t)return new Date(t.replace(/-/g,"/"))}Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};for(var i in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t};var l={created:function(){var t=this;this.$nextTick(function(){t.initData(),t.getMonthList(),t.$emit("changeMonth",t.year,t.month)})},watch:{arrangeArr:{handler:function(t){this.comparisonList()},deep:!0,immediate:!0},dataList:{handler:function(){this.comparisonList()},deep:!0}},props:{isSingle:{type:Boolean,default:!1},click:{type:Boolean,default:!0},showPrice:{type:Boolean,default:!0},showChildPrice:{type:Boolean,default:!1},showAuitPrice:{type:Boolean,default:!1},dataList:{type:[Array],default:function(){return[]}},timeKey:{type:[String],default:"onDate"},nubmerKey:{type:[String],default:"sum"},chooseItem:{type:[Object],default:function(){}}},computed:{yearAndMonth:function(){return this.year+"-"+this.month},acitveList:function(){var t=this.startTime&&h(this.startTime),e=this.endTime&&h(this.endTime),i=[],n=[];if(t&&e)n.push(t.getTime()),n.push(e.getTime()),n=n.sort();else if(t||e){var s=t||e;n[0]=s.getTime()}var a=JSON.parse(r()(this.list));return a=[].concat.apply([],a),0===n.length?(this.$emit("change",[]),[]):(t&&e&&2==n.length?a.forEach(function(t){n[0]<=t.ms&&n[1]>=t.ms&&i.push(t)}):(t||e)&&1==n.length&&a.forEach(function(t){n[0]===t.ms&&i.push(t)}),this.$emit("change",i),i)}},data:function(){return{activeTab:0,selectList:[],list:[],startTime:null,endTime:null,monthList:[],arrangeArr:[],year:"",month:""}},components:{},methods:{getMonthList:function(){var t=[],e=new Date,i=e.getMonth()+1,n=0;for(e.getFullYear();n<5;)i<=12?t.push({active:0==n,year:e.getFullYear(),month:i}):i>12&&t.push({active:0==n,year:e.getFullYear()+1,month:i%12}),i++,n++;this.monthList=t},checkActive:function(t){if(this.startTime&&!this.endTime&&t.ms===h(this.startTime).getTime())return!0},comparisonList:function(){var t=this,e=(new Date).setHours(0,0,0,0),i=this.startTime&&h(this.startTime).getTime(),n=this.endTime&&h(this.endTime).getTime(),a=this.arrangeArr.map(function(a,r){return a.active=!1,a.disabled=!1,a.istoday=!1,a.StartActive=!1,a.EndActive=!1,a.active=!1,a.ms<e&&(a.disabled=!0),a.ms===e&&(a.istoday=!0),t.isSingle&&t.chooseItem&&(t.chooseItem.onDate,a.onDate),t.isSingle||(t.startTime&&i==a.ms?a.StartActive=!0:t.endTime&&n==a.ms?a.EndActive=!0:i<a.ms&&n>a.ms?a.active=!0:t.startTime||t.endTime||(a.StartActive=!1,a.EndActive=!1,a.active=!1)),t.dataList.forEach(function(e){a.time==e[t.timeKey]&&((a=s()({},a,e))[t.nubmerKey]=e[t.nubmerKey])}),a});return this.list=this.chuck(a,7),[]},multipleChoose:function(t,e,i){var n=this;if(this.startTime||t.price){var s=!1,a=!0,r=void 0;if(this.startTime||this.endTime)if(this.startTime==t.time&&void 0==this.endTime)this.startTime=null,console.error("234");else if(this.startTime&&!this.endTime){if(new Date(this.startTime).getMonth()!=new Date(t.time).getMonth())return void toast("暂不支持跨月选择");h(t.time)<h(this.startTime)?(this.endTime=this.startTime,this.startTime=t.time,s=!0):this.endTime=t.time}else this.startTime&&this.endTime&&(this.endTime=null,this.startTime=null);else this.startTime=t.time;this.acitveList.some(function(t,e){if(!t.price)return a=!1,void(r=s?n.acitveList[e+1]:n.acitveList[e-1])}),0==a&&r&&(this.endTime=r.time),s&&r&&(this.endTime=this.startTime,this.startTime=r.time),this.$nextTick(function(){n.comparisonList()})}else toast("该天不在销售期")},singleChoose:function(t,e,i){for(var n=this,s=this.list.length,a=0;a<s;a++)for(var r=0;r<this.list[a].length;r++)this.list[a][r].singleClickActive=!1;this.$nextTick(function(){t.singleClickActive=!0,n.list[e].splice(i,1,t)}),this.$emit("singleClick",t)},select:function(t,e,i){if(this.click)if(this.isSingle){if(t.disabled)return;this.singleChoose.apply(this,arguments)}else{if(t.disabled)return;this.multipleChoose.apply(this,arguments)}},contrastTime:function(t,e){if(t instanceof Date&&e instanceof Date)return t.getTime()>e.getTime()},getPrevMonth:function(){this.month<=1?(this.month=13,this.year=parseInt(this.year)-1,this.month--):this.month--},getNextMonth:function(){12==this.month?(this.month=0,this.year=parseInt(this.year)+1,this.month++):this.month++},calculateTimeList:function(t,e,i){this.activeTab=i,this.year=t,this.month=e;var n=o(this.year,this.month);this.arrangeArr=n.days,this.$emit("changeMonth",this.year,this.month)},initData:function(){var t=o(),e=t.year,i=t.month,n=t.days;this.year=e,this.month=i,this.arrangeArr=n},chuck:function(t,e){for(var i=[],n=0,s=t.length;n<s;n+=e)i.push(t.slice(n,n+e));return i}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"current-month"},[i("div",{staticClass:"header-btn"},[t.monthList.length>0?i("ul",t._l(t.monthList,function(e,n){return i("li",{key:n,class:{"active-tab":n==t.activeTab},on:{click:function(i){t.calculateTimeList(e.year,e.month,n)}}},[t._v("\n          "+t._s(e.month)+"月\n        ")])})):t._e()]),t._v(" "),t._m(0),t._v(" "),i("div",[i("div",{staticClass:"date-list-wrapper"},t._l(t.list,function(e,n){return i("ul",{key:n},t._l(e,function(e,s){return i("li",{key:e.time,class:[{active:e.active,"start-active":t.startTime&&1==e.StartActive,"end-active":t.endTime&&1==e.EndActive,singleClickActive:e.singleClickActive}],on:{click:function(i){t.select(e,n,s)}}},[i("div",{staticClass:"item-wrap"},[e.StartActive||e.EndActive?i("p",{class:["remainder",{show:!0}],style:{color:"#Fff"}},[t._v("\n                "+t._s(e.StartActive?"入住":e.EndActive?"离店":"")+"\n              ")]):t._e(),t._v(" "),void 0===e.sum||e.singleClickActive?t._e():i("p",{class:["remainder",{show:void 0!==e.sum&&!1}],style:{color:e.active?"#Fff":"#F36A05"}},[t._v("\n                余"+t._s(e.sum)+"\n              ")]),t._v(" "),e.singleClickActive?i("p",{class:["remainder",{show:!1}],style:{color:"#Fff"}},[t._v("\n                已选\n              ")]):t._e(),t._v(" "),i("p",{class:["item-time",{"disabled ":e.disabled,white:e.singleClickActive}]},[t._v(" "+t._s(e.showDate))]),t._v(" "),t.showPrice?i("p",{class:{"item-price":!0,"base-color":!e.active,white:e.singleClickActive,"active-color":e.active,show:void 0===e.price}},[t._v("\n                ￥"+t._s(e.price)+"\n              ")]):t._e(),t._v(" "),t.showChildPrice?i("p",{class:{"item-price":!0,"base-color":!e.active,"active-color":e.active,show:void 0===e.childPrice}},[t._v("\n                ￥"+t._s(e.childPrice)+"\n              ")]):t._e(),t._v(" "),t.showAuitPrice?i("p",{class:{"item-price":!0,"base-color":!e.active,"active-color":e.active,show:void 0===e.auitPrice}},[t._v("\n                ￥"+t._s(e.auitPrice)+"\n              ")]):t._e()])])}))}))])]),t._v(" "),i("span",{staticStyle:{visibility:"hidden"}},[t._v(t._s(t.yearAndMonth))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"weekDay_text"},[i("span",[t._v("一")]),t._v(" "),i("span",[t._v("二")]),t._v(" "),i("span",[t._v("三")]),t._v(" "),i("span",[t._v("四")]),t._v(" "),i("span",[t._v("五")]),t._v(" "),i("span",[t._v("六")]),t._v(" "),i("span",[t._v("日")])])}]};var u={components:{calendar:i("VU/8")(l,m,!1,function(t){i("TwjT")},"data-v-4cf36e0a",null).exports},data:function(){return{list:[{onDate:"2018-10-10",price:"98"},{onDate:"2018-10-11",price:"98"},{onDate:"2018-10-15",price:"98"}]}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("calendar",{attrs:{isSingle:!0,dataList:this.list,timeKey:"onDate"}})],1)},staticRenderFns:[]};var d=i("VU/8")(u,v,!1,function(t){i("l5wX")},"data-v-0cc0bea8",null);e.default=d.exports},TwjT:function(t,e){},l5wX:function(t,e){},mvHQ:function(t,e,i){t.exports={default:i("qkKv"),__esModule:!0}},qkKv:function(t,e,i){var n=i("FeBl"),s=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}}});
//# sourceMappingURL=6.43e20ea14517a1a5f483.js.map